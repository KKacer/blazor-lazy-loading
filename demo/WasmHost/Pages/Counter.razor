@page "/counter"

@*<div class="pureCenter full light fadein">
    <div class="loader"></div>
</div>*@

<h1>Counter</h1>
<p>Current count: @currentCount</p>
<button class="btn btn-primary" @onclick="IncrementCount">Click me</button>

<Lazy Name="SimpleComponent" OnBeforeLoadAsync="Delay(350, 2500)">
    <div class="placeholder">
        <div class="pureCenter">
            <div class="loader"></div>
        </div>
    </div>
</Lazy>

<Lazy Name="NamedComponent" OnBeforeLoadAsync="Delay(350, 2500)">
    <div class="placeholder">
        <div class="pureCenter">
            <div class="loader"></div>
        </div>
    </div>
</Lazy>

@code {
    private int currentCount = 0;

    private void IncrementCount()
    {
        currentCount++;
    }

    private Func<Lazy, Task> Delay(int minMs, int maxMs)
    {
        return (Lazy c) => Task.Delay(new Random().Next(minMs, maxMs));
    }
}
